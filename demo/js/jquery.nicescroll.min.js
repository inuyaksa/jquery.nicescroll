/* jquery.nicescroll 3.5.4 InuYaksa*2013 MIT http://areaaperta.com/nicescroll */!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(i,o){function y(){var e=document.getElementsByTagName("script"),o=e[e.length-1].src.split("?")[0];return o.split("/").length>0?o.split("/").slice(0,-1).join("/")+"/":""}function w(t,o,r){for(var e=0;e<o.length;e++)r(t,o[e])}var a=!1,h=!1,v=5e3,S=2e3,n=0,e=i,g=["ms","moz","webkit","o"],t=window.requestAnimationFrame||!1,r=window.cancelAnimationFrame||!1;if(!t)for(var x in g){var p=g[x];t||(t=window[p+"RequestAnimationFrame"]),r||(r=window[p+"CancelAnimationFrame"]||window[p+"CancelRequestAnimationFrame"])}var d=window.MutationObserver||window.WebKitMutationObserver||!1,m={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:y()},u=!1,z=function(){function s(){var o=["-moz-grab","-webkit-grab","grab"];(e.ischrome&&!e.ischrome22||e.isie)&&(o=[]);for(var r=0;r<o.length;r++){var i=o[r];if(t.style.cursor=i,t.style.cursor===i)return i}return"url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}if(u)return u;var t=document.createElement("DIV"),e={};e.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,e.isopera="opera"in window,e.isopera12=e.isopera&&"getUserMedia"in navigator,e.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),e.isie="all"in document&&"attachEvent"in t&&!e.isopera,e.isieold=e.isie&&!("msInterpolationMode"in t.style),e.isie7=!(!e.isie||e.isieold||"documentMode"in document&&7!==document.documentMode),e.isie8=e.isie&&"documentMode"in document&&8===document.documentMode,e.isie9=e.isie&&"performance"in window&&document.documentMode>=9,e.isie10=e.isie&&"performance"in window&&document.documentMode>=10,e.isie9mobile=/iemobile.9/i.test(navigator.userAgent),e.isie9mobile&&(e.isie9=!1),e.isie7mobile=!e.isie9mobile&&e.isie7&&/iemobile/i.test(navigator.userAgent),e.ismozilla="MozAppearance"in t.style,e.iswebkit="WebkitAppearance"in t.style,e.ischrome="chrome"in window,e.ischrome22=e.ischrome&&e.haspointerlock,e.ischrome26=e.ischrome&&"transition"in t.style,e.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,e.hasmstouch=window.navigator.msPointerEnabled||!1,e.ismac=/^mac$/i.test(navigator.platform),e.isios=e.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),e.isios4=e.isios&&!("seal"in Object),e.isandroid=/android/i.test(navigator.userAgent),e.trstyle=!1,e.hastransform=!1,e.hastranslate3d=!1,e.transitionstyle=!1,e.hastransition=!1,e.transitionend=!1;for(var i=["transform","msTransform","webkitTransform","MozTransform","OTransform"],r=0;r<i.length;r++)if(t.style[i[r]]!==o){e.trstyle=i[r];break}e.hastransform=!e.trstyle,e.hastransform&&(t.style[e.trstyle]="translate3d(1px,2px,3px)",e.hastranslate3d=/translate3d/.test(t.style[e.trstyle])),e.transitionstyle=!1,e.prefixstyle="",e.transitionend=!1,i=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"];var n=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],l=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"];for(r=0;r<i.length;r++)if(i[r]in t.style){e.transitionstyle=i[r],e.prefixstyle=n[r],e.transitionend=l[r];break}return e.ischrome26&&(e.prefixstyle=n[1]),e.hastransition=e.transitionstyle,e.cursorgrabvalue=s(),e.hasmousecapture="setCapture"in t,e.hasMutationObserver=d!==!1,t=null,u=e,e},b=function(u,T){function c(e,o,t,r,i,n,s){this.st=e,this.ed=o,this.spd=t,this.p1=r||0,this.p2=i||1,this.p3=n||0,this.p4=s||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st}function k(){var e=i.win;if("zIndex"in e)return e.zIndex();for(;e.length>0;){if(9===e[0].nodeType)return!1;var o=e.css("zIndex");if(!isNaN(o)&&0!==o)return parseInt(o,10);e=e.parent()}return!1}function l(t,r,n){var o=t.css(r),e=parseFloat(o);if(isNaN(e)){e=M[o]||0;var s=3===e?n?i.win.outerHeight()-i.win.innerHeight():i.win.outerWidth()-i.win.innerWidth():1;return i.isie8&&e&&(e+=1),s?e:0}return e}function b(e,o,t,r){i._bind(e,o,function(r){r=r?r:window.event;var i={original:r,target:r.target||r.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===r.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return r.preventDefault?r.preventDefault():r.returnValue=!1,!1},stopImmediatePropagation:function(){r.stopImmediatePropagation?r.stopImmediatePropagation():r.cancelBubble=!0}};return"mousewheel"==o?(i.deltaY=-1/40*r.wheelDelta,r.wheelDeltaX&&(i.deltaX=-1/40*r.wheelDeltaX)):i.deltaY=r.detail,t.call(e,i)},r)}function w(e,r,n){var t,o;if(0===e.deltaMode?(t=-Math.floor(e.deltaX*(i.opt.mousescrollstep/54)),o=-Math.floor(e.deltaY*(i.opt.mousescrollstep/54))):1===e.deltaMode&&(t=-Math.floor(e.deltaX*i.opt.mousescrollstep),o=-Math.floor(e.deltaY*i.opt.mousescrollstep)),r&&i.opt.oneaxismousemode&&0===t&&o&&(t=o,o=0),t&&(i.scrollmom&&i.scrollmom.stop(),i.lastdeltax+=t,i.debounced("mousewheelx",function(){var e=i.lastdeltax;i.lastdeltax=0,i.rail.drag||i.doScrollLeftBy(e)},15)),o){if(i.opt.nativeparentscrolling&&n&&!i.ispage&&!i.zoomactive)if(0>o){if(i.getScrollTop()>=i.page.maxh)return!0}else if(i.getScrollTop()<=0)return!0;i.scrollmom&&i.scrollmom.stop(),i.lastdeltay+=o,i.debounced("mousewheely",function(){var e=i.lastdeltay;i.lastdeltay=0,i.rail.drag||i.doScrollBy(e)},15)}return e.stopImmediatePropagation(),e.preventDefault()}console.log(this);var i=this;if(this.version="3.5.4",this.name="nicescroll",this.me=T,this.opt={doc:e("body"),win:!1},e.extend(this.opt,m),this.opt.snapbackspeed=80,u)for(var g in i.opt)u[g]!==o&&(i.opt[g]=u[g]);this.doc=i.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",console.log(this),this.ispage=/^BODY|HTML/.test(i.opt.win?i.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=i.opt.win!==!1,this.win=i.opt.win||(this.ispage?e(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?e(window):this.win,this.body=e("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"===this.doc[0].nodeName&&"IFRAME"===this.win[0].nodeName,this.istextarea="TEXTAREA"===this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!==i.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.isrtlmode=!1,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;do this.id="ascrail"+S++;while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=i.opt.overflowx,this.overflowy=i.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=z();var s=e.extend({},this.detected);this.canhwscroll=s.hastransform&&i.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&i.haswrapper,this.istouchcapable=!1,s.cantouch&&s.ischrome&&!s.isios&&!s.isandroid&&(this.istouchcapable=!0,s.cantouch=!1),s.cantouch&&s.ismozilla&&!s.isios&&!s.isandroid&&(this.istouchcapable=!0,s.cantouch=!1),i.opt.enablemouselockapi||(s.hasmousecapture=!1,s.haspointerlock=!1),this.delayed=function(o,n,t,s){var e=i.delaylist[o],r=(new Date).getTime();return!s&&e&&e.tt?!1:(e&&e.tt&&clearTimeout(e.tt),e&&e.last+t>r&&!e.tt?i.delaylist[o]={last:r+t,tt:setTimeout(function(){i&&(i.delaylist[o].tt=0,n.call())},t)}:e&&e.tt||(i.delaylist[o]={last:r,tt:0},setTimeout(function(){n.call()},0)),void 0)},this.debounced=function(e,o,t){var r=i.delaylist[e];i.delaylist[e]=o,r||setTimeout(function(){var o=i.delaylist[e];i.delaylist[e]=!1,o.call()},t)};var p=!1;if(this.synched=function(e,o){function r(){p||(t(function(){p=!1;for(var e in i.synclist){var o=i.synclist[e];o&&o.call(i),i.synclist[e]=!1}}),p=!0)}return i.synclist[e]=o,r(),e},this.unsynched=function(e){i.synclist[e]&&(i.synclist[e]=!1)},this.css=function(o,t){for(var e in t)i.saved.css.push([o,e,o.css(e)]),o.css(e,t[e])},this.scrollTop=function(e){return e===o?i.getScrollTop():i.setScrollTop(e)},this.scrollLeft=function(e){return e===o?i.getScrollLeft():i.setScrollLeft(e)},c.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var o=(new Date).getTime(),e=1-(o-this.ts)/this.spd,t=this.B2(e)+this.B3(e)+this.B4(e);return 0>e?this.ed:this.st+Math.round(this.df*t)},update:function(e,o){return this.st=this.getNow(),this.ed=e,this.spd=o,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},s.hastranslate3d&&s.isios&&this.doc.css("-webkit-backface-visibility","hidden");var y=function(){var e=i.doc.css(s.trstyle);return e&&"matrix"===e.substr(0,6)?e.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1};this.getScrollTop=function(o){if(!o){var e=y();if(e)return 16==e.length?-e[13]:-e[5];if(i.timerscroll&&i.timerscroll.bz)return i.timerscroll.bz.getNow()}return i.doc.translate.y},this.getScrollLeft=function(o){if(!o){var e=y();if(e)return 16===e.length?-e[12]:-e[4];if(i.timerscroll&&i.timerscroll.bh)return i.timerscroll.bh.getNow()}return i.doc.translate.x},this.notifyScrollEvent=document.createEvent?function(o){var e=document.createEvent("UIEvents");e.initUIEvent("scroll",!1,!0,window,1),o.dispatchEvent(e)}:document.fireEvent?function(e){var o=document.createEventObject();e.fireEvent("onscroll"),o.cancelBubble=!0}:e.noop;var x=-1;s.hastranslate3d&&i.opt.enabletranslate3d?(this.setScrollTop=function(e,o){i.doc.translate.y=e,i.doc.translate.ty=-1*e+"px",i.doc.css(s.trstyle,"translate3d("+i.doc.translate.tx+","+i.doc.translate.ty+",0px)"),o||i.notifyScrollEvent(i.win[0])},this.setScrollLeft=function(e,o){i.doc.translate.x=e,i.doc.translate.tx=e*x+"px",i.doc.css(s.trstyle,"translate3d("+i.doc.translate.tx+","+i.doc.translate.ty+",0px)"),o||i.notifyScrollEvent(i.win[0])}):(this.setScrollTop=function(e,o){i.doc.translate.y=e,i.doc.translate.ty=-1*e+"px",i.doc.css(s.trstyle,"translate("+i.doc.translate.tx+","+i.doc.translate.ty+")"),o||i.notifyScrollEvent(i.win[0])},this.setScrollLeft=function(e,o){i.doc.translate.x=e,i.doc.translate.tx=e*x+"px",i.doc.css(s.trstyle,"translate("+i.doc.translate.tx+","+i.doc.translate.ty+")"),o||i.notifyScrollEvent(i.win[0])})}else this.getScrollTop=function(){return i.docscroll.scrollTop()},this.setScrollTop=function(e){return i.docscroll.scrollTop(e)},this.getScrollLeft=function(){return i.docscroll.scrollLeft()},this.setScrollLeft=function(e){return i.docscroll.scrollLeft(e)};this.getTarget=function(e){return e?e.target?e.target:e.srcElement?e.srcElement:!1:!1},this.hasParent=function(o,t){if(!o)return!1;for(var e=o.target||o.srcElement||o||!1;e&&e.id!==t;)e=e.parentNode||!1;return!!e};var M={thin:1,medium:3,thick:5};this.getOffset=function(){if(i.isfixed)return{top:parseFloat(i.win.css("top")),left:parseFloat(i.win.css("left"))};if(!i.viewport)return i.win.offset();var e=i.win.offset(),o=i.viewport.offset();return{top:e.top-o.top+i.viewport.scrollTop(),left:e.left-o.left+i.viewport.scrollLeft()}},this.updateScrollBar=function(r){if(i.ishwscroll)i.rail.css("height",i.win.innerHeight()),i.railh&&i.railh.css("width",i.win.innerWidth());else{var t=i.getOffset(),e={top:t.top,left:t.left};e.top+=l(i.win,"border-top-width",!0),e.left+=i.rail.align?i.win.outerWidth()-l(i.win,"border-right-width")-i.rail.width:l(i.win,"border-left-width");var o=i.opt.railoffset;if(o&&(o.top&&(e.top+=o.top),i.rail.align&&o.left&&(e.left+=o.left)),i.locked||i.rail.css({top:e.top,left:e.left,height:r?r.h:i.win.innerHeight()}),i.zoom&&i.zoom.css({top:e.top+1,left:1===i.rail.align?e.left-20:e.left+i.rail.width+4}),i.railh&&!i.locked){e={top:t.top,left:t.left};var n=i.railh.align?e.top+l(i.win,"border-top-width",!0)+i.win.innerHeight()-i.railh.height:e.top+l(i.win,"border-top-width",!0),s=e.left+l(i.win,"border-left-width");i.railh.css({top:n,left:s,width:i.railh.width})}}},this.doRailClick=function(o,l,e){var t,n,r,s;i.locked||(i.cancelEvent(o),l?(t=e?i.doScrollLeft:i.doScrollTop,r=e?(o.pageX-i.railh.offset().left-i.cursorwidth/2)*i.scrollratio.x:(o.pageY-i.rail.offset().top-i.cursorheight/2)*i.scrollratio.y,t(r)):(t=e?i.doScrollLeftBy:i.doScrollBy,r=e?i.scroll.x:i.scroll.y,s=e?o.pageX-i.railh.offset().left:o.pageY-i.rail.offset().top,n=e?i.view.w:i.view.h,t(r>=s?n:-n)))},i.hasanimationframe=t,i.hascancelanimationframe=r,i.hasanimationframe?i.hascancelanimationframe||(r=function(){i.cancelAnimationFrame=!0}):(t=function(e){return setTimeout(e,15-Math.floor(+new Date/1e3)%16)},r=clearInterval),this.init=function(){if(i.saved.css=[],s.isie7mobile)return!0;if(s.isoperamini)return!0;if(s.hasmstouch&&i.css(i.ispage?e("html"):i.win,{"-ms-touch-action":"none"}),i.zindex="auto",i.zindex=i.ispage||"auto"!==i.opt.zindex?i.opt.zindex:k()||"auto",i.ispage||"auto"===i.zindex||i.zindex>n&&(n=i.zindex),i.isie&&0===i.zindex&&"auto"===i.opt.zindex&&(i.zindex="auto"),!i.ispage||!s.cantouch&&!s.isieold&&!s.isie9mobile){var w=i.docscroll;i.ispage&&(w=i.haswrapper?i.win:i.doc),s.isie9mobile||i.css(w,{"overflow-y":"hidden"}),i.ispage&&s.isie7&&("BODY"==i.doc[0].nodeName?i.css(e("html"),{"overflow-y":"hidden"}):"HTML"==i.doc[0].nodeName&&i.css(e("body"),{"overflow-y":"hidden"})),!s.isios||i.ispage||i.haswrapper||i.css(e("body"),{"-webkit-overflow-scrolling":"touch"});var l=e(document.createElement("div"));l.css({position:"relative",top:0,"float":"right",width:i.opt.cursorwidth,height:"0px",backgroundColor:i.opt.cursorcolor,border:i.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":i.opt.cursorborderradius,"-moz-border-radius":i.opt.cursorborderradius,"border-radius":i.opt.cursorborderradius}),l.hborder=parseFloat(l.outerHeight()-l.innerHeight()),i.cursor=l;var t=e(document.createElement("div"));t.attr("id",i.id),t.addClass("nicescroll-rails");var m,c,b=["left","right"];for(var T in b)c=b[T],m=i.opt.railpadding[c],m?t.css("padding-"+c,m+"px"):i.opt.railpadding[c]=0;t.append(l),t.width=Math.max(parseFloat(i.opt.cursorwidth),l.outerWidth())+i.opt.railpadding.left+i.opt.railpadding.right,t.css({width:t.width+"px",zIndex:i.zindex,background:i.opt.background,cursor:"default"}),t.visibility=!0,t.scrollable=!0,t.align="left"===i.opt.railalign?0:1,i.rail=t,i.rail.drag=!1;var g=!1;!i.opt.boxzoom||i.ispage||s.isieold||(g=document.createElement("div"),i.bind(g,"click",i.doZoom),i.zoom=e(g),i.zoom.css({cursor:"pointer",zIndex:i.zindex,backgroundImage:"url("+i.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0 0"}),i.opt.dblclickzoom&&i.bind(i.win,"dblclick",i.doZoom),s.cantouch&&i.opt.gesturezoom&&(i.ongesturezoom=function(e){return e.scale>1.5&&i.doZoomIn(e),e.scale<.8&&i.doZoomOut(e),i.cancelEvent(e)},i.bind(i.win,"gestureend",i.ongesturezoom))),i.railh=!1;var r;if(i.opt.horizrailenabled&&(i.css(w,{"overflow-x":"hidden"}),l=e(document.createElement("div")),l.css({position:"relative",top:"0",width:"0",height:i.opt.cursorwidth,"background-color":i.opt.cursorcolor,border:i.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":i.opt.cursorborderradius,"-moz-border-radius":i.opt.cursorborderradius,"border-radius":i.opt.cursorborderradius}),l.wborder=parseFloat(l.outerWidth()-l.innerWidth()),i.cursorh=l,r=e(document.createElement("div")),r.attr("id",i.id+"-hr"),r.addClass("nicescroll-rails"),r.height=Math.max(parseFloat(i.opt.cursorwidth),l.outerHeight()),r.css({height:r.height+"px",zIndex:i.zindex,background:i.opt.background}),r.append(l),r.visibility=!0,r.scrollable=!0,r.align="top"===i.opt.railvalign?0:1,i.railh=r,i.railh.drag=!1),i.ispage)t.css({position:"fixed",top:"0px",height:"100%"}),t.css(t.align?"right":"left","0"),i.body.append(t),i.railh&&(r.css({position:"fixed",left:"0px",width:"100%"}),t.css(t.align?"bottom":"top","0"),i.body.append(r));else{if(i.ishwscroll){"static"===i.win.css("position")&&i.css(i.win,{position:"relative"});var u="HTML"===i.win[0].nodeName?i.body:i.win;i.zoom&&(i.zoom.css({position:"absolute",top:"1",right:"0",marginRight:t.width+4+"px"}),u.append(i.zoom)),t.css({position:"absolute",top:"0"}),t.css(t.align?"right":"left",0),u.append(t),r&&(r.css({position:"absolute",left:"0",bottom:"0"}),r.css(r.align?"bottom":"top",0),u.append(r))}else{i.isfixed="fixed"===i.win.css("position");var p=i.isfixed?"fixed":"absolute";i.isfixed||(i.viewport=i.getViewport(i.win[0])),i.viewport&&(i.body=i.viewport,/fixed|relative|absolute/.test(i.viewport.css("position"))||i.css(i.viewport,{position:"relative"})),t.css("position",p),i.zoom&&i.zoom.css("position",p),i.updateScrollBar(),i.body.append(t),i.zoom&&i.body.append(i.zoom),i.railh&&(r.css({position:p}),i.body.append(r))}s.isios&&i.css(i.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),s.isie&&i.opt.disableoutline&&i.win.attr("hideFocus","true"),s.iswebkit&&i.opt.disableoutline&&i.win.css({outline:"none"})}if(i.opt.autohidemode===!1?(i.autohidedom=!1,i.rail.css({opacity:i.opt.cursoropacitymax}),i.railh&&i.railh.css({opacity:i.opt.cursoropacitymax})):i.opt.autohidemode===!0||"leave"===i.opt.autohidemode?(i.autohidedom=e().add(i.rail),s.isie8&&(i.autohidedom=i.autohidedom.add(i.cursor)),i.railh&&(i.autohidedom=i.autohidedom.add(i.railh)),i.railh&&s.isie8&&(i.autohidedom=i.autohidedom.add(i.cursorh))):"scroll"===i.opt.autohidemode?(i.autohidedom=e().add(i.rail),i.railh&&(i.autohidedom=i.autohidedom.add(i.railh))):"cursor"===i.opt.autohidemode?(i.autohidedom=e().add(i.cursor),i.railh&&(i.autohidedom=i.autohidedom.add(i.cursorh))):"hidden"===i.opt.autohidemode&&(i.autohidedom=!1,i.hide(),i.locked=!1),s.isie9mobile){i.scrollmom=new f(i),i.onmangotouch=function(){var e=i.getScrollTop(),o=i.getScrollLeft();if(e==i.scrollmom.lastscrolly&&o==i.scrollmom.lastscrollx)return!0;var t=e-i.mangotouch.sy,r=o-i.mangotouch.sx,a=Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(t,2)));if(0!==a){var s=0>t?-1:1,l=0>r?-1:1,n=+new Date;if(i.mangotouch.lazy&&clearTimeout(i.mangotouch.lazy),n-i.mangotouch.tm>80||i.mangotouch.dry!==s||i.mangotouch.drx!==l)i.scrollmom.stop(),i.scrollmom.reset(o,e),i.mangotouch.sy=e,i.mangotouch.ly=e,i.mangotouch.sx=o,i.mangotouch.lx=o,i.mangotouch.dry=s,i.mangotouch.drx=l,i.mangotouch.tm=n;else{i.scrollmom.stop(),i.scrollmom.update(i.mangotouch.sx-r,i.mangotouch.sy-t),i.mangotouch.tm=n;var c=Math.max(Math.abs(i.mangotouch.ly-e),Math.abs(i.mangotouch.lx-o));i.mangotouch.ly=e,i.mangotouch.lx=o,c>2&&(i.mangotouch.lazy=setTimeout(function(){i.mangotouch.lazy=!1,i.mangotouch.dry=0,i.mangotouch.drx=0,i.mangotouch.tm=0,i.scrollmom.doMomentum(30)},100))}}};var y=i.getScrollTop(),x=i.getScrollLeft();i.mangotouch={sy:y,ly:y,dry:0,sx:x,lx:x,drx:0,lazy:!1,tm:0},i.bind(i.docscroll,"scroll",i.onmangotouch)}else{if(s.cantouch||i.istouchcapable||i.opt.touchbehavior||s.hasmstouch){i.scrollmom=new f(i),i.ontouchstart=function(o){if(o.pointerType&&2!==o.pointerType)return!1;if(i.hasmoving=!1,!i.locked){var t;if(s.hasmstouch)for(t=o.target?o.target:!1;t;){var r=e(t).getNiceScroll();if(r.length>0&&r[0].me===i.me)break;if(r.length>0)return!1;if("DIV"===t.nodeName&&t.id===i.id)break;t=t.parentNode?t.parentNode:!1}if(i.cancelScroll(),t=i.getTarget(o)){var h=/INPUT/i.test(t.nodeName)&&/range/i.test(t.type);if(h)return i.stopPropagation(o)}if(!("clientX"in o)&&"changedTouches"in o&&(o.clientX=o.changedTouches[0].clientX,o.clientY=o.changedTouches[0].clientY),i.forcescreen){var l=o;o={original:o.original?o.original:o},o.clientX=l.screenX,o.clientY=l.screenY}if(i.rail.drag={x:o.clientX,y:o.clientY,sx:i.scroll.x,sy:i.scroll.y,st:i.getScrollTop(),sl:i.getScrollLeft(),pt:2,dl:!1},i.ispage||!i.opt.directionlockdeadzone)i.rail.drag.dl="f";else{var a={w:e(window).width(),h:e(window).height()},c={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},d=Math.max(0,c.h-a.h),u=Math.max(0,c.w-a.w);i.rail.drag.ck=!i.rail.scrollable&&i.railh.scrollable?d>0?"v":!1:i.rail.scrollable&&!i.railh.scrollable?u>0?"h":!1:!1,i.rail.drag.ck||(i.rail.drag.dl="f")}if(i.opt.touchbehavior&&i.isiframe&&s.isie){var n=i.win.position();i.rail.drag.x+=n.left,i.rail.drag.y+=n.top}if(i.hasmoving=!1,i.lastmouseup=!1,i.scrollmom.reset(o.clientX,o.clientY),!s.cantouch&&!this.istouchcapable&&!s.hasmstouch){var p=t?/INPUT|SELECT|TEXTAREA/i.test(t.nodeName):!1;if(!p)return!i.ispage&&s.hasmousecapture&&t.setCapture(),i.opt.touchbehavior?(t.onclick&&!t._onclick&&(t._onclick=t.onclick,t.onclick=function(e){return i.hasmoving?!1:(t._onclick.call(this,e),void 0)}),i.cancelEvent(o)):i.stopPropagation(o);/SUBMIT|CANCEL|BUTTON/i.test(e(t).attr("type"))&&(pc={tg:t,click:!1},i.preventclick=pc)}}},i.ontouchend=function(e){return e.pointerType&&2!=e.pointerType?!1:i.rail.drag&&2==i.rail.drag.pt&&(i.scrollmom.doMomentum(),i.rail.drag=!1,i.hasmoving&&(i.lastmouseup=!0,i.hideCursor(),s.hasmousecapture&&document.releaseCapture(),!s.cantouch))?i.cancelEvent(e):void 0};var M=i.opt.touchbehavior&&i.isiframe&&!s.hasmousecapture;i.ontouchmove=function(t,b){if(t.pointerType&&2!==t.pointerType)return!1;if(i.rail.drag&&2===i.rail.drag.pt){if(s.cantouch&&t.original===o)return!0;i.hasmoving=!0,i.preventclick&&!i.preventclick.click&&(i.preventclick.click=i.preventclick.tg.onclick||!1,i.preventclick.tg.onclick=i.onpreventclick);var y=e.extend({original:t},t);if(t=y,"changedTouches"in t&&(t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),i.forcescreen){var w=t;t={original:t.original?t.original:t},t.clientX=w.screenX,t.clientY=w.screenY}var g=0,f=0;if(M&&!b){var p=i.win.position();g=-p.left,f=-p.top}var u=t.clientY+f,v=u-i.rail.drag.y,d=t.clientX+g,m=d-i.rail.drag.x,n=i.rail.drag.st-v;i.ishwscroll&&i.opt.bouncescroll?0>n?n=Math.round(n/2):n>i.page.maxh&&(n=i.page.maxh+Math.round((n-i.page.maxh)/2)):(0>n&&(n=0,u=0),n>i.page.maxh&&(n=i.page.maxh,u=0));var r;i.railh&&i.railh.scrollable&&(r=i.rail.drag.sl-m,i.ishwscroll&&i.opt.bouncescroll?0>r?r=Math.round(r/2):r>i.page.maxw&&(r=i.page.maxw+Math.round((r-i.page.maxw)/2)):(0>r&&(r=0,d=0),r>i.page.maxw&&(r=i.page.maxw,d=0)));var h=!1;if(i.rail.drag.dl)h=!0,"v"==i.rail.drag.dl?r=i.rail.drag.sl:"h"==i.rail.drag.dl&&(n=i.rail.drag.st);else{var l=Math.abs(v),c=Math.abs(m),a=i.opt.directionlockdeadzone;if("v"===i.rail.drag.ck){if(l>a&&.3*l>=c)return i.rail.drag=!1,!0;c>a&&(i.rail.drag.dl="f",e("body").scrollTop(e("body").scrollTop()))}else if("h"===i.rail.drag.ck){if(c>a&&.3*c>=l)return i.rail.drag=!1,!0;l>a&&(i.rail.drag.dl="f",e("body").scrollLeft(e("body").scrollLeft()))}}if(i.synched("touchmove",function(){i.rail.drag&&2==i.rail.drag.pt&&(i.prepareTransition&&i.prepareTransition(0),i.rail.scrollable&&i.setScrollTop(n),i.scrollmom.update(d,u),i.railh&&i.railh.scrollable?(i.setScrollLeft(r),i.showCursor(n,r)):i.showCursor(n),s.isie10&&document.selection.clear())}),s.ischrome&&i.istouchcapable&&(h=!1),h)return i.cancelEvent(t)}}}if(i.onmousedown=function(e,o){if(!i.rail.drag||1===i.rail.drag.pt){if(i.locked)return i.cancelEvent(e);i.cancelScroll(),i.rail.drag={x:e.clientX,y:e.clientY,sx:i.scroll.x,sy:i.scroll.y,pt:1,hr:!!o};var t=i.getTarget(e);return!i.ispage&&s.hasmousecapture&&t.setCapture(),i.isiframe&&!s.hasmousecapture&&(i.saved.csspointerevents=i.doc.css("pointer-events"),i.css(i.doc,{"pointer-events":"none"})),i.hasmoving=!1,i.cancelEvent(e)}},i.onmouseup=function(e){if(i.rail.drag){if(s.hasmousecapture&&document.releaseCapture(),i.isiframe&&!s.hasmousecapture&&i.doc.css("pointer-events",i.saved.csspointerevents),1!=i.rail.drag.pt)return;return i.rail.drag=!1,i.hasmoving&&i.triggerScrollEnd(),i.cancelEvent(e)}},i.onmousemove=function(e){if(i.rail.drag){if(1!==i.rail.drag.pt)return;if(s.ischrome&&0===e.which)return i.onmouseup(e);if(i.cursorfreezed=!0,i.hasmoving=!0,i.rail.drag.hr){i.scroll.x=i.rail.drag.sx+(e.clientX-i.rail.drag.x),i.scroll.x<0&&(i.scroll.x=0);var o=i.scrollvaluemaxw;i.scroll.x>o&&(i.scroll.x=o)}else{i.scroll.y=i.rail.drag.sy+(e.clientY-i.rail.drag.y),i.scroll.y<0&&(i.scroll.y=0);var t=i.scrollvaluemax;i.scroll.y>t&&(i.scroll.y=t)}return i.synched("mousemove",function(){i.rail.drag&&1===i.rail.drag.pt&&(i.showCursor(),i.rail.drag.hr?i.doScrollLeft(Math.round(i.scroll.x*i.scrollratio.x),i.opt.cursordragspeed):i.doScrollTop(Math.round(i.scroll.y*i.scrollratio.y),i.opt.cursordragspeed))}),i.cancelEvent(e)}},s.cantouch||i.opt.touchbehavior)i.onpreventclick=function(e){return i.preventclick?(i.preventclick.tg.onclick=i.preventclick.click,i.preventclick=!1,i.cancelEvent(e)):void 0},i.bind(i.win,"mousedown",i.ontouchstart),i.onclick=s.isios?!1:function(e){return i.lastmouseup?(i.lastmouseup=!1,i.cancelEvent(e)):!0},i.opt.grabcursorenabled&&s.cursorgrabvalue&&(i.css(i.ispage?i.doc:i.win,{cursor:s.cursorgrabvalue}),i.css(i.rail,{cursor:s.cursorgrabvalue}));else{var S=function(t){if(i.selectiondrag){if(t){var o=i.win.outerHeight(),e=t.pageY-i.selectiondrag.top;e>0&&o>e&&(e=0),e>=o&&(e-=o),i.selectiondrag.df=e}if(0!==i.selectiondrag.df){var r=2*-Math.floor(i.selectiondrag.df/6);i.doScrollBy(r),i.debounced("doselectionscroll",function(){S()},50)}}};i.hasTextSelected="getSelection"in document?function(){return document.getSelection().rangeCount>0}:"selection"in document?function(){return"None"!==document.selection.type}:function(){return!1},i.onselectionstart=function(){i.ispage||(i.selectiondrag=i.win.offset())},i.onselectionend=function(){i.selectiondrag=!1},i.onselectiondrag=function(e){i.selectiondrag&&i.hasTextSelected()&&i.debounced("selectionscroll",function(){S(e)},250)}}s.hasmstouch&&(i.css(i.rail,{"-ms-touch-action":"none"}),i.css(i.cursor,{"-ms-touch-action":"none"}),i.bind(i.win,"MSPointerDown",i.ontouchstart),i.bind(document,"MSPointerUp",i.ontouchend),i.bind(document,"MSPointerMove",i.ontouchmove),i.bind(i.cursor,"MSGestureHold",function(e){e.preventDefault()}),i.bind(i.cursor,"contextmenu",function(e){e.preventDefault()})),this.istouchcapable&&(i.bind(i.win,"touchstart",i.ontouchstart),i.bind(document,"touchend",i.ontouchend),i.bind(document,"touchcancel",i.ontouchend),i.bind(document,"touchmove",i.ontouchmove)),i.bind(i.cursor,"mousedown",i.onmousedown),i.bind(i.cursor,"mouseup",i.onmouseup),i.railh&&(i.bind(i.cursorh,"mousedown",function(e){i.onmousedown(e,!0)}),i.bind(i.cursorh,"mouseup",i.onmouseup)),(i.opt.cursordragontouch||!s.cantouch&&!i.opt.touchbehavior)&&(i.rail.css("cursor","default"),i.railh&&i.railh.css("cursor","default"),i.jqbind(i.rail,"mouseenter",function(){return i.win.is(":visible")?(i.canshowonmouseevent&&i.showCursor(),i.rail.active=!0,void 0):!1}),i.jqbind(i.rail,"mouseleave",function(){i.rail.active=!1,i.rail.drag||i.hideCursor()}),i.opt.sensitiverail&&(i.bind(i.rail,"click",function(e){i.doRailClick(e,!1,!1)}),i.bind(i.rail,"dblclick",function(e){i.doRailClick(e,!0,!1)}),i.bind(i.cursor,"click",function(e){i.cancelEvent(e)}),i.bind(i.cursor,"dblclick",function(e){i.cancelEvent(e)})),i.railh&&(i.jqbind(i.railh,"mouseenter",function(){return i.win.is(":visible")?(i.canshowonmouseevent&&i.showCursor(),i.rail.active=!0,void 0):!1}),i.jqbind(i.railh,"mouseleave",function(){i.rail.active=!1,i.rail.drag||i.hideCursor()}),i.opt.sensitiverail&&(i.bind(i.railh,"click",function(e){i.doRailClick(e,!1,!0)}),i.bind(i.railh,"dblclick",function(e){i.doRailClick(e,!0,!0)}),i.bind(i.cursorh,"click",function(e){i.cancelEvent(e)}),i.bind(i.cursorh,"dblclick",function(e){i.cancelEvent(e)})))),s.cantouch||i.opt.touchbehavior?(i.bind(s.hasmousecapture?i.win:document,"mouseup",i.ontouchend),i.bind(document,"mousemove",i.ontouchmove),i.onclick&&i.bind(document,"click",i.onclick),i.opt.cursordragontouch&&(i.bind(i.cursor,"mousedown",i.onmousedown),i.bind(i.cursor,"mousemove",i.onmousemove),i.cursorh&&(i.bind(i.cursorh,"mousedown",function(e){i.onmousedown(e,!0)}),i.bind(i.cursorh,"mousemove",i.onmousemove)))):(i.bind(s.hasmousecapture?i.win:document,"mouseup",i.onmouseup),i.bind(document,"mousemove",i.onmousemove),i.onclick&&i.bind(document,"click",i.onclick),!i.ispage&&i.opt.enablescrollonselection&&(i.bind(i.win[0],"mousedown",i.onselectionstart),i.bind(document,"mouseup",i.onselectionend),i.bind(i.cursor,"mouseup",i.onselectionend),i.cursorh&&i.bind(i.cursorh,"mouseup",i.onselectionend),i.bind(document,"mousemove",i.onselectiondrag)),i.zoom&&(i.jqbind(i.zoom,"mouseenter",function(){i.canshowonmouseevent&&i.showCursor(),i.rail.active=!0}),i.jqbind(i.zoom,"mouseleave",function(){i.rail.active=!1,i.rail.drag||i.hideCursor()}))),i.opt.enablemousewheel&&(i.isiframe||i.bind(s.isie&&i.ispage?document:i.win,"mousewheel",i.onmousewheel),i.bind(i.rail,"mousewheel",i.onmousewheel),i.railh&&i.bind(i.railh,"mousewheel",i.onmousewheelhr)),i.ispage||s.cantouch||/HTML|^BODY/.test(i.win[0].nodeName)||(i.win.attr("tabindex")||i.win.attr("tabindex",v++),i.jqbind(i.win,"focus",function(e){a=i.getTarget(e).id||!0,i.hasfocus=!0,i.canshowonmouseevent&&i.noticeCursor()}),i.jqbind(i.win,"blur",function(){a=!1,i.hasfocus=!1}),i.jqbind(i.win,"mouseenter",function(e){h=i.getTarget(e).id||!0,i.hasmousefocus=!0,i.canshowonmouseevent&&i.noticeCursor()}),i.jqbind(i.win,"mouseleave",function(){h=!1,i.hasmousefocus=!1,i.rail.drag||i.hideCursor()}))}if(i.onkeypress=function(t){if(i.locked&&0===i.page.maxh)return!0;t=t?t:window.e;var r=i.getTarget(t);if(r&&/INPUT|TEXTAREA|SELECT|OPTION/.test(r.nodeName)){var c=r.getAttribute("type")||r.type||!1;if(!c||!/submit|button|cancel/i.tp)return!0}if(e(r).attr("contenteditable"))return!0;if(i.hasfocus||i.hasmousefocus&&!a||i.ispage&&!a&&!h){var l=t.keyCode;if(i.locked&&27!==l)return i.cancelEvent(t);var n=t.ctrlKey||!1,d=t.shiftKey||!1,o=!1,s=72;switch(l){case 38:case 63233:i.doScrollBy(s),o=!0;break;case 40:case 63235:i.doScrollBy(-s),o=!0;break;case 37:case 63232:i.railh&&(n?i.doScrollLeft(0):i.doScrollLeftBy(s),o=!0);break;case 39:case 63234:i.railh&&(n?i.doScrollLeft(i.page.maxw):i.doScrollLeftBy(-s),o=!0);break;case 33:case 63276:i.doScrollBy(i.view.h),o=!0;break;case 34:case 63277:i.doScrollBy(-i.view.h),o=!0;break;case 36:case 63273:i.railh&&n?i.doScrollPos(0,0):i.doScrollTo(0),o=!0;break;case 35:case 63275:i.railh&&n?i.doScrollPos(i.page.maxw,i.page.maxh):i.doScrollTo(i.page.maxh),o=!0;break;case 32:i.opt.spacebarenabled&&(d?i.doScrollBy(i.view.h):i.doScrollBy(-i.view.h),o=!0);break;case 27:i.zoomactive&&(i.doZoom(),o=!0)}if(o)return i.cancelEvent(t)}},i.opt.enablekeyboard&&i.bind(document,s.isopera&&!s.isopera12?"keypress":"keydown",i.onkeypress),i.bind(document,"keydown",function(e){var o=e.ctrlKey||!1;o&&(i.wheelprevented=!0)}),i.bind(document,"keyup",function(e){var o=e.ctrlKey||!1;o||(i.wheelprevented=!1)}),i.bind(window,"resize",i.lazyResize),i.bind(window,"orientationchange",i.lazyResize),i.bind(window,"load",i.lazyResize),s.ischrome&&!i.ispage&&!i.haswrapper){var E=i.win.attr("style"),L=parseFloat(i.win.css("width"))+1;
i.win.css("width",L),i.synched("chromefix",function(){i.win.attr("style",E)})}i.onAttributeChange=function(){i.lazyResize(250)},i.ispage||i.haswrapper||(d!==!1?(i.observer=new d(function(e){e.forEach(i.onAttributeChange)}),i.observer.observe(i.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),i.observerremover=new d(function(e){e.forEach(function(e){if(e.removedNodes.length>0)for(var o in e.removedNodes)if(e.removedNodes[o]===i.win[0])return i.remove()})}),i.observerremover.observe(i.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(i.bind(i.win,s.isie&&!s.isie9?"propertychange":"DOMAttrModified",i.onAttributeChange),s.isie9&&i.win[0].attachEvent("onpropertychange",i.onAttributeChange),i.bind(i.win,"DOMNodeRemoved",function(e){e.target===i.win[0]&&i.remove()}))),!i.ispage&&i.opt.boxzoom&&i.bind(window,"resize",i.resizeZoom),i.istextarea&&i.bind(i.win,"mouseup",i.lazyResize),i.lazyResize(30)}if("IFRAME"===this.doc[0].nodeName){var z=function(){i.iframexd=!1;var o;try{o="contentDocument"in this?this.contentDocument:this.contentWindow.document}catch(r){i.iframexd=!0,o=!1}if(i.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(i.forcescreen=!0,i.isiframe&&(i.iframe={doc:e(o),html:i.doc.contents().find("html")[0],body:i.doc.contents().find("body")[0]},i.getContentSize=function(){return{w:Math.max(i.iframe.html.scrollWidth,i.iframe.body.scrollWidth),h:Math.max(i.iframe.html.scrollHeight,i.iframe.body.scrollHeight)}},i.docscroll=e(i.iframe.body)),!s.isios&&i.opt.iframeautoresize&&!i.isiframe){i.win.scrollTop(0),i.doc.height("");var t=Math.max(o.getElementsByTagName("html")[0].scrollHeight,o.body.scrollHeight);i.doc.height(t)}i.lazyResize(30),s.isie7&&i.css(e(i.iframe.html),{"overflow-y":"hidden"}),i.css(e(i.iframe.body),{"overflow-y":"hidden"}),s.isios&&i.haswrapper&&i.css(e(o.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?i.bind(this.contentWindow,"scroll",i.onscroll):i.bind(o,"scroll",i.onscroll),i.opt.enablemousewheel&&i.bind(o,"mousewheel",i.onmousewheel),i.opt.enablekeyboard&&i.bind(o,s.isopera?"keypress":"keydown",i.onkeypress),(s.cantouch||i.opt.touchbehavior)&&(i.bind(o,"mousedown",i.ontouchstart),i.bind(o,"mousemove",function(e){i.ontouchmove(e,!0)}),i.opt.grabcursorenabled&&s.cursorgrabvalue&&i.css(e(o.body),{cursor:s.cursorgrabvalue})),i.bind(o,"mouseup",i.ontouchend),i.zoom&&(i.opt.dblclickzoom&&i.bind(o,"dblclick",i.doZoom),i.ongesturezoom&&i.bind(o,"gestureend",i.ongesturezoom))};this.doc[0].readyState&&"complete"===this.doc[0].readyState&&setTimeout(function(){z.call(i.doc[0],!1)},500),i.bind(this.doc,"load",z)}},this.showCursor=function(e,t){i.cursortimeout&&(clearTimeout(i.cursortimeout),i.cursortimeout=0),i.rail&&(i.autohidedom&&(i.autohidedom.stop().css("opacity",i.opt.cursoropacitymax),i.cursoractive=!0),i.rail.drag&&1===i.rail.drag.pt||(e!==o&&e!==!1&&(i.scroll.y=Math.round(1*e/i.scrollratio.y)),t!==o&&(i.scroll.x=Math.round(1*t/i.scrollratio.x))),i.cursor.css({height:i.cursorheight,top:i.scroll.y}),i.cursorh&&(!i.rail.align&&i.rail.visibility?i.cursorh.css({width:i.cursorwidth,left:i.scroll.x+i.rail.width}):i.cursorh.css({width:i.cursorwidth,left:i.scroll.x}),i.cursoractive=!0),i.zoom&&i.zoom.stop().css("opacity",i.opt.cursoropacitymax))},this.hideCursor=function(e){i.cursortimeout||i.rail&&i.autohidedom&&(i.hasmousefocus&&"leave"===i.opt.autohidemode||(i.cursortimeout=setTimeout(function(){i.rail.active&&i.showonmouseevent||(i.autohidedom.stop().animate({opacity:i.opt.cursoropacitymin}),i.zoom&&i.zoom.stop().animate({opacity:i.opt.cursoropacitymin}),i.cursoractive=!1),i.cursortimeout=0},e||i.opt.hidecursordelay)))},this.noticeCursor=function(e,o,t){i.showCursor(o,t),i.rail.active||i.hideCursor(e)},this.getContentSize=i.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:i.haswrapper?function(){return{w:i.doc.outerWidth()+parseInt(i.win.css("paddingLeft"),10)+parseInt(i.win.css("paddingRight"),10),h:i.doc.outerHeight()+parseInt(i.win.css("paddingTop"),10)+parseInt(i.win.css("paddingBottom"),10)}}:function(){return{w:i.docscroll[0].scrollWidth,h:i.docscroll[0].scrollHeight}},this.onResize=function(a,o){if(!i||!i.win)return!1;if(!i.haswrapper&&!i.ispage){if("none"===i.win.css("display"))return i.visibility&&i.hideRail().hideRailHr(),!1;i.hidden||i.visibility||i.showRail().showRailHr()}var r=i.page.maxh,n=i.page.maxw,s={h:i.view.h,w:i.view.w};if(i.view={w:i.ispage?i.win.width():parseInt(i.win[0].clientWidth,10),h:i.ispage?i.win.height():parseInt(i.win[0].clientHeight,10)},i.page=o?o:i.getContentSize(),i.page.maxh=Math.max(0,i.page.h-i.view.h),i.page.maxw=Math.max(0,i.page.w-i.view.w),i.page.maxh===r&&i.page.maxw===n&&i.view.w===s.w){if(i.ispage)return i;var e=i.win.offset();if(i.lastposition){var t=i.lastposition;if(t.top===e.top&&t.left===e.left)return i}i.lastposition=e}if(0===i.page.maxh?(i.hideRail(),i.scrollvaluemax=0,i.scroll.y=0,i.scrollratio.y=0,i.cursorheight=0,i.setScrollTop(0),i.rail.scrollable=!1):i.rail.scrollable=!0,0===i.page.maxw?(i.hideRailHr(),i.scrollvaluemaxw=0,i.scroll.x=0,i.scrollratio.x=0,i.cursorwidth=0,i.setScrollLeft(0),i.railh.scrollable=!1):i.railh.scrollable=!0,i.locked=0===i.page.maxh&&0===i.page.maxw,i.locked)return i.ispage||i.updateScrollBar(i.view),!1;i.hidden||i.visibility?i.hidden||i.railh.visibility||i.showRailHr():i.showRail().showRailHr(),i.istextarea&&i.win.css("resize")&&"none"!==i.win.css("resize")&&(i.view.h-=20),i.cursorheight=Math.min(i.view.h,Math.round(i.view.h*(i.view.h/i.page.h))),i.cursorheight=i.opt.cursorfixedheight?i.opt.cursorfixedheight:Math.max(i.opt.cursorminheight,i.cursorheight),i.cursorwidth=Math.min(i.view.w,Math.round(i.view.w*(i.view.w/i.page.w))),i.cursorwidth=i.opt.cursorfixedheight?i.opt.cursorfixedheight:Math.max(i.opt.cursorminheight,i.cursorwidth),i.scrollvaluemax=i.view.h-i.cursorheight-i.cursor.hborder,i.railh&&(i.railh.width=i.page.maxh>0?i.view.w-i.rail.width:i.view.w,i.scrollvaluemaxw=i.railh.width-i.cursorwidth-i.cursorh.wborder),i.ispage||i.updateScrollBar(i.view),i.scrollratio={x:i.page.maxw/i.scrollvaluemaxw,y:i.page.maxh/i.scrollvaluemax};var l=i.getScrollTop();return l>i.page.maxh?i.doScrollTop(i.page.maxh):(i.scroll.y=Math.round(i.getScrollTop()*(1/i.scrollratio.y)),i.scroll.x=Math.round(i.getScrollLeft()*(1/i.scrollratio.x)),i.cursoractive&&i.noticeCursor()),i.scroll.y&&0===i.getScrollTop()&&i.doScrollTo(Math.floor(i.scroll.y*i.scrollratio.y)),i},this.resize=i.onResize,this.lazyResize=function(e){return e=isNaN(e)?30:e,i.delayed("resize",i.resize,e),i},this._bind=function(e,o,t,r){i.events.push({e:e,n:o,f:t,b:r,q:!1}),e.addEventListener?e.addEventListener(o,t,r||!1):e.attachEvent?e.attachEvent("on"+o,t):e["on"+o]=t},this.jqbind=function(o,t,r){i.events.push({e:o,n:t,f:r,q:!0}),e(o).bind(t,r)},this.bind=function(l,r,t,n){var e="jquery"in l?l[0]:l;if("mousewheel"===r)if("onwheel"in i.win)i._bind(e,"wheel",t,n||!1);else{var a=document.onmousewheel!==o?"mousewheel":"DOMMouseScroll";b(e,a,t,n||!1),"DOMMouseScroll"===a&&b(e,"MozMousePixelScroll",t,n||!1)}else if(e.addEventListener){if(s.cantouch&&/mouseup|mousedown|mousemove/.test(r)){var c="mousedown"===r?"touchstart":"mouseup"===r?"touchend":"touchmove";i._bind(e,c,function(e){var o;e.touches?e.touches.length<2&&(o=e.touches.length?e.touches[0]:e,o.original=e,t.call(this,o)):e.changedTouches&&(o=e.changedTouches[0],o.original=e,t.call(this,o))},n||!1)}i._bind(e,r,t,n||!1),s.cantouch&&"mouseup"===r&&i._bind(e,"touchcancel",t,n||!1)}else i._bind(e,r,function(o){return o=o||window.event||!1,o&&o.srcElement&&(o.target=o.srcElement),"pageY"in o||(o.pageX=o.clientX+document.documentElement.scrollLeft,o.pageY=o.clientY+document.documentElement.scrollTop),t.call(e,o)===!1||n===!1?i.cancelEvent(o):!0})},this._unbind=function(e,o,t,r){e.removeEventListener?e.removeEventListener(o,t,r):e.detachEvent?e.detachEvent("on"+o,t):e["on"+o]=!1},this.unbindAll=function(){for(var o=0;o<i.events.length;o++){var e=i.events[o];e.q?e.e.unbind(e.n,e.f):i._unbind(e.e,e.n,e.f,e.b)}},this.cancelEvent=function(e){return(e=e.original?e.original:e?e:window.event||!1)?(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1):!1},this.stopPropagation=function(e){return(e=e.original?e.original:e?e:window.event)?e.stopPropagation?e.stopPropagation():(e.cancelBubble&&(e.cancelBubble=!0),!1):!1},this.showRail=function(){return 0===i.page.maxh||!i.ispage&&"none"===i.win.css("display")||(i.visibility=!0,i.rail.visibility=!0,i.rail.css("display","block")),i},this.showRailHr=function(){return i.railh?(0===i.page.maxw||!i.ispage&&"none"===i.win.css("display")||(i.railh.visibility=!0,i.railh.css("display","block")),i):i},this.hideRail=function(){return i.visibility=!1,i.rail.visibility=!1,i.rail.css("display","none"),i},this.hideRailHr=function(){return i.railh?(i.railh.visibility=!1,i.railh.css("display","none"),i):i},this.show=function(){return i.hidden=!1,i.locked=!1,i.showRail().showRailHr()},this.hide=function(){return i.hidden=!0,i.locked=!0,i.hideRail().hideRailHr()},this.toggle=function(){return i.hidden?i.show():i.hide()},this.remove=function(){i.stop(),i.cursortimeout&&clearTimeout(i.cursortimeout),i.doZoomOut(),i.unbindAll(),s.isie9&&i.win[0].detachEvent("onpropertychange",i.onAttributeChange),i.observer!==!1&&i.observer.disconnect(),i.observerremover!==!1&&i.observerremover.disconnect(),i.events=null,i.cursor&&i.cursor.remove(),i.cursorh&&i.cursorh.remove(),i.rail&&i.rail.remove(),i.railh&&i.railh.remove(),i.zoom&&i.zoom.remove();for(var n=0;n<i.saved.css.length;n++){var r=i.saved.css[n];r[0].css(r[1],r[2]===o?"":r[2])}i.saved=!1,i.me.data("__nicescroll","");var t=e.nicescroll;t.each(function(e){if(this&&this.id===i.id){delete t[e];for(var o=++e;o<t.length;o++,e++)t[e]=t[o];t.length--,t.length&&delete t[t.length]}});for(var l in i)i[l]=null,delete i[l];i=null},this.scrollstart=function(e){return this.onscrollstart=e,i},this.scrollend=function(e){return this.onscrollend=e,i},this.scrollcancel=function(e){return this.onscrollcancel=e,i},this.zoomin=function(e){return this.onzoomin=e,i},this.zoomout=function(e){return this.onzoomout=e,i},this.isScrollable=function(t){var o=t.target?t.target:t;if("OPTION"===o.nodeName)return!0;for(;o&&1===o.nodeType&&!/^BODY|HTML/.test(o.nodeName);){var r=e(o),i=r.css("overflowY")||r.css("overflowX")||r.css("overflow")||"";if(/scroll|auto/.test(i))return o.clientHeight!=o.scrollHeight;o=o.parentNode?o.parentNode:!1}return!1},this.getViewport=function(r){for(var o=r&&r.parentNode?r.parentNode:!1;o&&1==o.nodeType&&!/^BODY|HTML/.test(o.nodeName);){var t=e(o);if(/fixed|absolute/.test(t.css("position")))return t;var i=t.css("overflowY")||t.css("overflowX")||t.css("overflow")||"";if(/scroll|auto/.test(i)&&o.clientHeight!==o.scrollHeight)return t;if(t.getNiceScroll().length>0)return t;o=o.parentNode?o.parentNode:!1}return o?e(o):!1},this.triggerScrollEnd=function(){if(i.onscrollend){var e=i.getScrollLeft(),o=i.getScrollTop(),t={type:"scrollend",current:{x:e,y:o},end:{x:e,y:o}};i.onscrollend.call(i,t)}},this.onmousewheel=function(e){if(!i.wheelprevented){if(i.locked)return i.debounced("checkunlock",i.resize,250),!0;if(i.rail.drag)return i.cancelEvent(e);if("auto"===i.opt.oneaxismousemode&&0!==e.deltaX&&(i.opt.oneaxismousemode=!1),i.opt.oneaxismousemode&&0===e.deltaX&&!i.rail.scrollable)return i.railh&&i.railh.scrollable?i.onmousewheelhr(e):!0;var o=+new Date,t=!1;if(i.opt.preservenativescrolling&&i.checkarea+600<o&&(i.nativescrollingarea=i.isScrollable(e),t=!0),i.checkarea=o,i.nativescrollingarea)return!0;var r=w(e,!1,t);return r&&(i.checkarea=0),r}},this.onmousewheelhr=function(e){if(!i.wheelprevented){if(i.locked||!i.railh.scrollable)return!0;if(i.rail.drag)return i.cancelEvent(e);var o=+new Date,t=!1;return i.opt.preservenativescrolling&&i.checkarea+600<o&&(i.nativescrollingarea=i.isScrollable(e),t=!0),i.checkarea=o,i.nativescrollingarea?!0:i.locked?i.cancelEvent(e):w(e,!0,t)}},this.stop=function(){return i.cancelScroll(),i.scrollmon&&i.scrollmon.stop(),i.cursorfreezed=!1,i.scroll.y=Math.round(i.getScrollTop()*(1/i.scrollratio.y)),i.noticeCursor(),i},this.getTransitionSpeed=function(o){var t=Math.round(10*i.opt.scrollspeed),e=Math.min(t,Math.round(o/20*i.opt.scrollspeed));return e>20?e:0},i.opt.smoothscroll?i.ishwscroll&&s.hastransition&&i.opt.usetransition?(this.prepareTransition=function(e,r){var o=r?e>20?e:0:i.getTransitionSpeed(e),t=o?s.prefixstyle+"transform "+o+"ms ease-out":"";return i.lasttransitionstyle&&i.lasttransitionstyle==t||(i.lasttransitionstyle=t,i.doc.css(s.transitionstyle,t)),o},this.doScrollLeft=function(e,o){var t=i.scrollrunning?i.newscrolly:i.getScrollTop();i.doScrollPos(e,t,o)},this.doScrollTop=function(e,o){var t=i.scrollrunning?i.newscrollx:i.getScrollLeft();i.doScrollPos(t,e,o)},this.doScrollPos=function(e,o,n){var t=i.getScrollTop(),r=i.getScrollLeft();return((i.newscrolly-t)*(o-t)<0||(i.newscrollx-r)*(e-r)<0)&&i.cancelScroll(),i.opt.bouncescroll===!1&&(0>o?o=0:o>i.page.maxh&&(o=i.page.maxh),0>e?e=0:e>i.page.maxw&&(e=i.page.maxw)),i.scrollrunning&&e===i.newscrollx&&o==i.newscrolly?!1:(i.newscrolly=o,i.newscrollx=e,i.newscrollspeed=n||!1,i.timer?!1:(i.timer=setTimeout(function(){var n=i.getScrollTop(),l=i.getScrollLeft(),r={};r.x=e-l,r.y=o-n,r.px=l,r.py=n;var a=Math.round(Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2))),t=i.newscrollspeed&&i.newscrollspeed>1?i.newscrollspeed:i.getTransitionSpeed(a);if(i.newscrollspeed&&i.newscrollspeed<=1&&(t*=i.newscrollspeed),i.prepareTransition(t,!0),i.timerscroll&&i.timerscroll.tm&&clearInterval(i.timerscroll.tm),t>0){if(!i.scrollrunning&&i.onscrollstart){var d={type:"scrollstart",current:{x:l,y:n},request:{x:e,y:o},end:{x:i.newscrollx,y:i.newscrolly},speed:t};i.onscrollstart.call(i,d)}s.transitionend?i.scrollendtrapped||(i.scrollendtrapped=!0,i.bind(i.doc,s.transitionend,i.onScrollTransitionEnd,!1)):(i.scrollendtrapped&&clearTimeout(i.scrollendtrapped),i.scrollendtrapped=setTimeout(i.onScrollTransitionEnd,t));var u=n,h=l;i.timerscroll={bz:new c(u,i.newscrolly,t,0,0,.58,1),bh:new c(h,i.newscrollx,t,0,0,.58,1)},i.cursorfreezed||(i.timerscroll.tm=setInterval(function(){i.showCursor(i.getScrollTop(),i.getScrollLeft())},60))}i.synched("doScroll-set",function(){i.timer=0,i.scrollendtrapped&&(i.scrollrunning=!0),i.setScrollTop(i.newscrolly),i.setScrollLeft(i.newscrollx),i.scrollendtrapped||i.onScrollTransitionEnd()})},50),void 0))},this.cancelScroll=function(){if(!i.scrollendtrapped)return!0;var e=i.getScrollTop(),o=i.getScrollLeft();return i.scrollrunning=!1,s.transitionend||clearTimeout(s.transitionend),i.scrollendtrapped=!1,i._unbind(i.doc,s.transitionend,i.onScrollTransitionEnd),i.prepareTransition(0),i.setScrollTop(e),i.railh&&i.setScrollLeft(o),i.timerscroll&&i.timerscroll.tm&&clearInterval(i.timerscroll.tm),i.timerscroll=!1,i.cursorfreezed=!1,i.showCursor(e,o),i},this.onScrollTransitionEnd=function(){i.scrollendtrapped&&i._unbind(i.doc,s.transitionend,i.onScrollTransitionEnd),i.scrollendtrapped=!1,i.prepareTransition(0),i.timerscroll&&i.timerscroll.tm&&clearInterval(i.timerscroll.tm),i.timerscroll=!1;var e=i.getScrollTop(),o=i.getScrollLeft();return i.setScrollTop(e),i.railh&&i.setScrollLeft(o),i.noticeCursor(!1,e,o),i.cursorfreezed=!1,0>e?e=0:e>i.page.maxh&&(e=i.page.maxh),0>o?o=0:o>i.page.maxw&&(o=i.page.maxw),e!==i.newscrolly||o!==i.newscrollx?i.doScrollPos(o,e,i.opt.snapbackspeed):(i.onscrollend&&i.scrollrunning&&i.triggerScrollEnd(),i.scrollrunning=!1,void 0)}):(this.doScrollLeft=function(e,o){var t=i.scrollrunning?i.newscrolly:i.getScrollTop();i.doScrollPos(e,t,o)},this.doScrollTop=function(e,o){var t=i.scrollrunning?i.newscrollx:i.getScrollLeft();i.doScrollPos(t,e,o)},this.doScrollPos=function(s,e,p){function h(){if(i.cancelAnimationFrame)return!0;if(i.scrollrunning=!0,m=1-m)return i.timer=t(h)||1;var r,n=0,e=i.getScrollTop(),s=e;i.dst.ay?(e=i.bzscroll?i.dst.py+i.bzscroll.getNow()*i.dst.ay:i.newscrolly,r=e-s,(0>r&&e<i.newscrolly||r>0&&e>i.newscrolly)&&(e=i.newscrolly),i.setScrollTop(e),e===i.newscrolly&&(n=1)):n=1;var o=i.getScrollLeft(),l=o;i.dst.ax?(o=i.bzscroll?i.dst.px+i.bzscroll.getNow()*i.dst.ax:i.newscrollx,r=o-l,(0>r&&o<i.newscrollx||r>0&&o>i.newscrollx)&&(o=i.newscrollx),i.setScrollLeft(o),o===i.newscrollx&&(n+=1)):n+=1,2===n?(i.timer=0,i.cursorfreezed=!1,i.bzscroll=!1,i.scrollrunning=!1,0>e?e=0:e>i.page.maxh&&(e=i.page.maxh),0>o?o=0:o>i.page.maxw&&(o=i.page.maxw),o!==i.newscrollx||e!==i.newscrolly?i.doScrollPos(o,e):i.onscrollend&&i.triggerScrollEnd()):i.timer=t(h)||1}if(e||(e=i.getScrollTop(!0)),i.timer&&i.newscrolly===e&&i.newscrollx===s)return!0;i.timer&&r(i.timer),i.timer=0;var o=i.getScrollLeft(),n=i.getScrollTop();((i.newscrolly-n)*(e-n)<0||(i.newscrollx-o)*(s-o)<0)&&i.cancelScroll(),i.newscrolly=e,i.newscrollx=s,i.bouncescroll&&i.rail.visibility||(i.newscrolly<0?i.newscrolly=0:i.newscrolly>i.page.maxh&&(i.newscrolly=i.page.maxh)),i.bouncescroll&&i.railh.visibility||(i.newscrollx<0?i.newscrollx=0:i.newscrollx>i.page.maxw&&(i.newscrollx=i.page.maxw)),i.dst={},i.dst.x=s-o,i.dst.y=e-n,i.dst.px=o,i.dst.py=n;var d=Math.round(Math.sqrt(Math.pow(i.dst.x,2)+Math.pow(i.dst.y,2)));i.dst.ax=i.dst.x/d,i.dst.ay=i.dst.y/d;var u=0,a=d;0===i.dst.x?(u=n,a=e,i.dst.ay=1,i.dst.py=0):0===i.dst.y&&(u=o,a=s,i.dst.ax=1,i.dst.px=0);var l=i.getTransitionSpeed(d);if(p&&1>=p&&(l*=p),i.bzscroll=l>0?i.bzscroll?i.bzscroll.update(a,l):new c(u,a,l,0,1,0,1):!1,!i.timer){(n===i.page.maxh&&e>=i.page.maxh||o===i.page.maxw&&s>=i.page.maxw)&&i.checkContentSize();var m=1;if(i.cancelAnimationFrame=!1,i.timer=1,i.onscrollstart&&!i.scrollrunning){var f={type:"scrollstart",current:{x:o,y:n},request:{x:s,y:e},end:{x:i.newscrollx,y:i.newscrolly},speed:l};i.onscrollstart.call(i,f)}h(),(n===i.page.maxh&&e>=n||o===i.page.maxw&&s>=o)&&i.checkContentSize(),i.noticeCursor()}},this.cancelScroll=function(){return i.timer&&r(i.timer),i.timer=0,i.bzscroll=!1,i.scrollrunning=!1,i}):(this.doScrollLeft=function(e,o){var t=i.getScrollTop();i.doScrollPos(e,t,o)},this.doScrollTop=function(e,o){var t=i.getScrollLeft();i.doScrollPos(t,e,o)},this.doScrollPos=function(t,r){var e=t>i.page.maxw?i.page.maxw:t;0>e&&(e=0);var o=r>i.page.maxh?i.page.maxh:r;0>o&&(o=0),i.synched("scroll",function(){i.setScrollTop(o),i.setScrollLeft(e)})},this.cancelScroll=e.noop),this.doScrollBy=function(t,r){var e=0;if(r)e=Math.floor((i.scroll.y-t)*i.scrollratio.y);else{var n=i.timer?i.newscrolly:i.getScrollTop(!0);e=n-t}if(i.bouncescroll){var o=Math.round(i.view.h/2);-o>e?e=-o:e>i.page.maxh+o&&(e=i.page.maxh+o)}return i.cursorfreezed=!1,py=i.getScrollTop(!0),0>e&&0>=py?i.noticeCursor():e>i.page.maxh&&py>=i.page.maxh?(i.checkContentSize(),i.noticeCursor()):(i.doScrollTop(e),void 0)},this.doScrollLeftBy=function(t,r){var e=0;if(r)e=Math.floor((i.scroll.x-t)*i.scrollratio.x);else{var n=i.timer?i.newscrollx:i.getScrollLeft(!0);e=n-t}if(i.bouncescroll){var o=Math.round(i.view.w/2);-o>e?e=-o:e>i.page.maxw+o&&(e=i.page.maxw+o)}return i.cursorfreezed=!1,px=i.getScrollLeft(!0),0>e&&0>=px?i.noticeCursor():e>i.page.maxw&&px>=i.page.maxw?i.noticeCursor():(i.doScrollLeft(e),void 0)},this.doScrollTo=function(o,t){var e=t?Math.round(o*i.scrollratio.y):o;0>e?e=0:e>i.page.maxh&&(e=i.page.maxh),i.cursorfreezed=!1,i.doScrollTop(o)},this.checkContentSize=function(){var e=i.getContentSize();(e.h!==i.page.h||e.w!==i.page.w)&&i.resize(!1,e)},i.onscroll=function(){i.rail.drag||i.cursorfreezed||i.synched("scroll",function(){i.scroll.y=Math.round(i.getScrollTop()*(1/i.scrollratio.y)),i.railh&&(i.scroll.x=Math.round(i.getScrollLeft()*(1/i.scrollratio.x))),i.noticeCursor()})},i.bind(i.docscroll,"scroll",i.onscroll),this.doZoomIn=function(a){if(!i.zoomactive){i.zoomactive=!0,i.zoomrestore={style:{}};var t=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],r=i.win[0].style;for(var c in t){var o=t[c];i.zoomrestore.style[o]="undefined"!=typeof r[o]?r[o]:""}i.zoomrestore.style.width=i.win.css("width"),i.zoomrestore.style.height=i.win.css("height"),i.zoomrestore.padding={w:i.win.outerWidth()-i.win.width(),h:i.win.outerHeight()-i.win.height()},s.isios4&&(i.zoomrestore.scrollTop=e(window).scrollTop(),e(window).scrollTop(0)),i.win.css({position:s.isios4?"absolute":"fixed",top:"0",left:"0",zIndex:n+100,margin:"0"});var l=i.win.css("backgroundColor");return(""===l||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(l))&&i.win.css("backgroundColor","#fff"),i.rail.css("z-index",n+101),i.zoom.css({"z-index":n+102,backgroundPosition:"0 -18px"}),i.resizeZoom(),i.onzoomin&&i.onzoomin.call(i),i.cancelEvent(a)}},this.doZoomOut=function(o){return i.zoomactive?(i.zoomactive=!1,i.win.css("margin",""),i.win.css(i.zoomrestore.style),s.isios4&&e(window).scrollTop(i.zoomrestore.scrollTop),i.rail.css("zIndex",i.zindex),i.zoom.css("zIndex",i.zindex),i.zoomrestore=!1,i.zoom.css("backgroundPosition","0 0"),i.onResize(),i.onzoomout&&i.onzoomout.call(i),i.cancelEvent(o)):void 0},this.doZoom=function(e){return i.zoomactive?i.doZoomOut(e):i.doZoomIn(e)},this.resizeZoom=function(){if(i.zoomactive){var o=i.getScrollTop();i.win.css({width:e(window).width()-i.zoomrestore.padding.w+"px",height:e(window).height()-i.zoomrestore.padding.h+"px"}),i.onResize(),i.setScrollTop(Math.min(i.page.maxh,o))}},this.init(),e.nicescroll.push(this)},f=function(o){var e=this;this.nc=o,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(o,t){e.stop();var r=e.time();e.steptime=0,e.lasttime=r,e.speedx=0,e.speedy=0,e.lastx=o,e.lasty=t,e.lastscrollx=-1,e.lastscrolly=-1},this.update=function(o,t){var r=e.time();e.steptime=r-e.lasttime,e.lasttime=r;var i=t-e.lasty,n=o-e.lastx,a=e.nc.getScrollTop(),c=e.nc.getScrollLeft(),s=a+i,l=c+n;e.snapx=0>l||l>e.nc.page.maxw,e.snapy=0>s||s>e.nc.page.maxh,e.speedx=n,e.speedy=i,e.lastx=o,e.lasty=t},this.stop=function(){e.nc.unsynched("domomentum2d"),e.timer&&clearTimeout(e.timer),e.timer=0,e.lastscrollx=-1,e.lastscrolly=-1},this.doSnapy=function(o,t){var r=!1;0>t?(t=0,r=!0):t>e.nc.page.maxh&&(t=e.nc.page.maxh,r=!0),0>o?(o=0,r=!0):o>e.nc.page.maxw&&(o=e.nc.page.maxw,r=!0),r?e.nc.doScrollPos(o,t,e.nc.opt.snapbackspeed):e.nc.triggerScrollEnd()},this.doMomentum=function(d){var l=e.time(),u=d?l+d:e.lasttime,a=e.nc.getScrollLeft(),c=e.nc.getScrollTop(),n=e.nc.page.maxh,s=e.nc.page.maxw;e.speedx=s>0?Math.min(60,e.speedx):0,e.speedy=n>0?Math.min(60,e.speedy):0;var i=u&&60>=l-u;(0>c||c>n||0>a||a>s)&&(i=!1);var f=e.speedy&&i?e.speedy:!1,m=e.speedx&&i?e.speedx:!1;if(f||m){var r=Math.max(16,e.steptime);if(r>50){var h=r/50;e.speedx*=h,e.speedy*=h,r=50}e.demulxy=0,e.lastscrollx=e.nc.getScrollLeft(),e.chkx=e.lastscrollx,e.lastscrolly=e.nc.getScrollTop(),e.chky=e.lastscrolly;var t=e.lastscrollx,o=e.lastscrolly,p=function(){var i=e.time()-l>600?.04:.02;e.speedx&&(t=Math.floor(e.lastscrollx-e.speedx*(1-e.demulxy)),e.lastscrollx=t,(0>t||t>s)&&(i=.1)),e.speedy&&(o=Math.floor(e.lastscrolly-e.speedy*(1-e.demulxy)),e.lastscrolly=o,(0>o||o>n)&&(i=.1)),e.demulxy=Math.min(1,e.demulxy+i),e.nc.synched("domomentum2d",function(){if(e.speedx){var r=e.nc.getScrollLeft();r!=e.chkx&&e.stop(),e.chkx=t,e.nc.setScrollLeft(t)}if(e.speedy){var i=e.nc.getScrollTop();i!=e.chky&&e.stop(),e.chky=o,e.nc.setScrollTop(o)}e.timer||(e.nc.hideCursor(),e.doSnapy(t,o))}),e.demulxy<1?e.timer=setTimeout(p,r):(e.stop(),e.nc.hideCursor(),e.doSnapy(t,o))};p()}else e.doSnapy(e.nc.getScrollLeft(),e.nc.getScrollTop())}},c=i.fn.scrollTop;i.cssHooks.pageYOffset={get:function(t){var o=e.data(t,"__nicescroll");return o&&o.ishwscroll?o.getScrollTop():c.call(t)},set:function(t,r){var o=e.data(t,"__nicescroll");return o&&o.ishwscroll?o.setScrollTop(parseInt(r,10)):c.call(t,r),this}},i.fn.scrollTop=function(t){if(t===o){var r=this[0]?e.data(this[0],"__nicescroll"):!1;return r&&r.ishwscroll?r.getScrollTop():c.call(this)}return this.each(function(){var o=e.data(this,"__nicescroll");o&&o.ishwscroll?o.setScrollTop(parseInt(t,10)):c.call(e(this),t)})};var l=i.fn.scrollLeft;e.cssHooks.pageXOffset={get:function(t){var o=e.data(t,"__nicescroll");return o&&o.ishwscroll?o.getScrollLeft():l.call(t)},set:function(t,r){var o=e.data(t,"__nicescroll")||!1;return o&&o.ishwscroll?o.setScrollLeft(parseInt(r,10)):l.call(t,r),this}},e.fn.scrollLeft=function(t){if(t===o){var r=this[0]?e.data(this[0],"__nicescroll")||!1:!1;return r&&r.ishwscroll?r.getScrollLeft():l.call(this)}return this.each(function(){var o=e.data(this,"__nicescroll")||!1;o&&o.ishwscroll?o.setScrollLeft(parseInt(t,10)):l.call(e(this),t)})};var s=function(t){var o=this;if(this.length=0,this.name="nicescrollarray",this.each=function(t){for(var e=0,r=0;e<o.length;e++)t.call(o[e],r++);return o},this.push=function(e){o[o.length]=e,o.length++},this.eq=function(e){return o[e]},t)for(var r=0;r<t.length;r++){var i=e.data(t[r],"__nicescroll")||!1;i&&(this[this.length]=i,this.length++)}return this};w(s.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(o,e){o[e]=function(){var o=arguments;return this.each(function(){this[e].apply(this,o)})}}),e.fn.getNiceScroll=function(t){if(t===o)return new s(this);var r=this[t]&&e.data(this[t],"__nicescroll")||!1;return r},e.extend(e.expr[":"],{nicescroll:function(o){return e.data(o,"__nicescroll")?!0:!1}}),e.fn.niceScroll=function(r,t){t===o&&("object"!=typeof r||"jquery"in r||(t=r,r=!1));var i=new s;t===o&&(t={}),r&&(t.doc=e(r),t.win=e(this));var n=!("doc"in t);return n||"win"in t||(t.win=e(this)),this.each(function(){var o=e(this).data("__nicescroll")||!1;o||(t.doc=n?e(this):t.doc,o=new b(t,e(this)),e(this).data("__nicescroll",o)),i.push(o)}),1===i.length?i[0]:i},window.NiceScroll={getjQuery:function(){return i}},e.nicescroll||(e.nicescroll=new s,e.nicescroll.options=m)});